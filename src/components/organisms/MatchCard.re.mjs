// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Rating from "../../lib/Rating.re.mjs";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";
import * as PlayerRow from "../molecules/PlayerRow.re.mjs";
import * as ScoreModal from "./ScoreModal.re.mjs";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Option from "@rescript/core/src/Core__Option.re.mjs";
import * as LucideReact from "lucide-react";
import * as ConfirmButton from "../molecules/ConfirmButton.re.mjs";
import * as MatchCardEdit from "./MatchCardEdit.re.mjs";
import * as UseLongPress from "use-long-press";
import * as JsxRuntime from "react/jsx-runtime";
import * as MatchCard_user_graphql from "../../__generated__/MatchCard_user_graphql.re.mjs";
import * as RescriptRelay_Fragment from "rescript-relay/src/RescriptRelay_Fragment.re.mjs";

import { t } from '@lingui/macro'
;

var convertFragment = MatchCard_user_graphql.Internal.convertFragment;

function use(fRef) {
  return RescriptRelay_Fragment.useFragment(MatchCard_user_graphql.node, convertFragment, fRef);
}

function useOpt(fRef) {
  return RescriptRelay_Fragment.useFragmentOpt(fRef !== undefined ? Caml_option.some(Caml_option.valFromOption(fRef)) : undefined, MatchCard_user_graphql.node, convertFragment);
}

var Fragment = {
  Types: undefined,
  Operation: undefined,
  convertFragment: convertFragment,
  use: use,
  useOpt: useOpt
};

function make(param) {
  var match = param.match;
  var team1 = match[0];
  var team2 = match[1];
  var outcome = Rating.Rating.predictWin([
        team1.map(function (node) {
              return node.rating;
            }),
        team2.map(function (node) {
              return node.rating;
            })
      ]);
  var odds_0 = Core__Option.getOr(outcome[0], 0);
  var odds_1 = Core__Option.getOr(outcome[1], 0);
  var odds = odds_1 - odds_0;
  var leftOdds = odds < 0 ? Math.abs(odds * 100) : 0;
  var rightOdds = odds < 0 ? 0 : odds * 100;
  var favoredTeam = odds < 0 ? 1 : 2;
  var barLength = odds < 0 ? leftOdds : rightOdds;
  return [
          favoredTeam,
          barLength
        ];
}

var MatchCard$PredictionBar = make;

var PredictionBar = {
  make: MatchCard$PredictionBar
};

function MatchCard$Team(props) {
  var __debug = props.debug;
  var getUserFragmentRefs = props.getUserFragmentRefs;
  var normalizeSkillLevel = props.normalizeSkillLevel;
  var onScoreChange = props.onScoreChange;
  var onTeamClick = props.onTeamClick;
  var teamNumber = props.teamNumber;
  var isEditing = props.isEditing;
  var isWinner = props.isWinner;
  var score = props.score;
  var players = props.players;
  var debug = __debug !== undefined ? __debug : false;
  var bgClass = isEditing ? "p-2 lg:pr-2 bg-slate-50 flex-1 border-b lg:border-b-0 border-slate-200" : (
      isWinner ? "p-2 lg:pr-2 cursor-pointer transition-all flex-1 border-b lg:border-b-0 bg-green-50 border-b-green-500 lg:border-b-0" : "p-2 lg:pr-2 cursor-pointer transition-all flex-1 border-b lg:border-b-0 bg-white hover:bg-slate-50 border-b-slate-200 lg:border-b-0"
    );
  return JsxRuntime.jsx("div", {
              children: isEditing ? JsxRuntime.jsxs(JsxRuntime.Fragment, {
                      children: [
                        JsxRuntime.jsxs("div", {
                              children: [
                                JsxRuntime.jsx("div", {
                                      children: t`TEAM ${teamNumber.toString()}`,
                                      className: "text-xs font-semibold text-slate-600"
                                    }),
                                JsxRuntime.jsx("input", {
                                      className: "w-16 px-2 py-1 text-sm text-center border border-slate-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",
                                      inputMode: "numeric",
                                      pattern: "[0-9]*",
                                      placeholder: t`Score`,
                                      type: "number",
                                      value: Core__Option.getOr(Core__Option.map(score, (function (s) {
                                                  return s.toString();
                                                })), ""),
                                      onChange: (function (e) {
                                          onScoreChange(e.target.value);
                                        })
                                    })
                              ],
                              className: "flex items-center justify-between mb-2"
                            }),
                        JsxRuntime.jsx("div", {
                              children: players.map(function (player) {
                                    return JsxRuntime.jsx(PlayerRow.make, {
                                                player: player,
                                                isEditing: isEditing,
                                                teamSide: teamNumber === 1 ? "Left" : "Right",
                                                skillLevel: normalizeSkillLevel(player.rating.mu),
                                                getUserFragmentRefs: getUserFragmentRefs,
                                                debug: debug
                                              }, player.id);
                                  }),
                              className: "space-y-2"
                            })
                      ]
                    }) : JsxRuntime.jsxs("div", {
                      children: [
                        JsxRuntime.jsx("div", {
                              children: isWinner ? JsxRuntime.jsx(LucideReact.Trophy, {
                                      className: "w-5 h-5 text-yellow-500 fill-yellow-500"
                                    }) : (
                                  Core__Option.isNone(score) ? JsxRuntime.jsx(LucideReact.Circle, {
                                          className: "w-4 h-4 text-blue-500 fill-blue-500"
                                        }) : null
                                ),
                              className: "w-5 h-5 flex items-center justify-center flex-shrink-0"
                            }),
                        JsxRuntime.jsx("div", {
                              children: players.map(function (player) {
                                    return JsxRuntime.jsx(PlayerRow.make, {
                                                player: player,
                                                isEditing: false,
                                                winner: isWinner ? (
                                                    teamNumber === 1 ? "Left" : "Right"
                                                  ) : undefined,
                                                teamSide: teamNumber === 1 ? "Left" : "Right",
                                                skillLevel: normalizeSkillLevel(player.rating.mu),
                                                getUserFragmentRefs: getUserFragmentRefs,
                                                debug: debug
                                              }, player.id);
                                  }),
                              className: "flex flex-col sm:flex-row sm:flex-wrap lg:flex-col gap-1.5 flex-1 min-w-0"
                            }),
                        !props.hideScores && Core__Option.isSome(score) ? JsxRuntime.jsx("div", {
                                children: Core__Option.getOr(score, 0).toString(),
                                className: "text-lg font-bold text-slate-800 flex-shrink-0"
                              }) : null
                      ],
                      className: "flex items-center gap-2"
                    }),
              className: bgClass,
              onClick: (function (param) {
                  if (isEditing) {
                    return ;
                  } else {
                    return onTeamClick();
                  }
                })
            });
}

var Team = {
  make: MatchCard$Team
};

function MatchCard$MatchQualityDebug(props) {
  var match = props.match;
  var matchQuality = Rating.Rating.predictDraw([
        match[0].map(function (p) {
              return p.rating;
            }),
        match[1].map(function (p) {
              return p.rating;
            })
      ]);
  return JsxRuntime.jsx("span", {
              children: "Q: " + matchQuality.toFixed(3),
              className: "text-xs text-slate-500 font-mono"
            });
}

var MatchQualityDebug = {
  make: MatchCard$MatchQualityDebug
};

function MatchCard(props) {
  var __matchHistory = props.matchHistory;
  var __team2History = props.team2History;
  var __team1History = props.team1History;
  var getUserFragmentRefs = props.getUserFragmentRefs;
  var __debug = props.debug;
  var onUpdated = props.onUpdated;
  var onDelete = props.onDelete;
  var score = props.score;
  var maxRating = props.maxRating;
  var minRating = props.minRating;
  var courtNumber = props.courtNumber;
  var match = props.match;
  var children = props.children;
  var __defaultView = props.defaultView;
  var defaultView = __defaultView !== undefined ? __defaultView : "Default";
  var debug = __debug !== undefined ? __debug : false;
  var team1History = __team1History !== undefined ? __team1History : "NoHistory";
  var team2History = __team2History !== undefined ? __team2History : "NoHistory";
  var matchHistory = __matchHistory !== undefined ? __matchHistory : "NoHistory";
  var match$1 = React.useState(function () {
        return defaultView;
      });
  var setView = match$1[1];
  var match$2 = React.useState(function () {
        
      });
  var setSelectedWinner = match$2[1];
  var normalizeSkillLevel = function (mu) {
    if (maxRating === minRating) {
      return 50;
    } else {
      return (mu - minRating) / (maxRating - minRating) * 100;
    }
  };
  var team2 = match[1];
  var team1 = match[0];
  var match$3 = Core__Option.getOr(Core__Option.map(score, (function (param) {
              return [
                      param[0],
                      param[1]
                    ];
            })), [
        0,
        0
      ]);
  var scoreRightValue = match$3[1];
  var scoreLeftValue = match$3[0];
  var currentWinner = scoreLeftValue > scoreRightValue ? "Left" : (
      scoreRightValue > scoreLeftValue ? "Right" : undefined
    );
  var handleSave = function (param) {
    var updatedScore = param[1];
    var updatedMatch = param[0];
    Core__Option.map(onUpdated, (function (f) {
            f([
                  updatedMatch,
                  updatedScore
                ]);
          }));
  };
  var handleLongPress = function (team) {
    var winningTeam;
    winningTeam = team === "Left" ? "Team1" : "Team2";
    setSelectedWinner(function (param) {
          return winningTeam;
        });
  };
  var handleClick = function (team) {
    var scoreData;
    scoreData = team === "Left" ? [
        1,
        -1
      ] : [
        -1,
        1
      ];
    handleSave([
          [
            team1,
            team2
          ],
          scoreData
        ]);
  };
  var options1_onCancel = (function (_event, _meta) {
      
    });
  var options1_threshold = 500;
  var options1_cancelOnMovement = true;
  var options1_detect = "pointer";
  var options1 = {
    onCancel: options1_onCancel,
    threshold: options1_threshold,
    cancelOnMovement: options1_cancelOnMovement,
    detect: options1_detect
  };
  var bindTeam1 = UseLongPress.useLongPress((function (_event, _meta) {
          handleLongPress("Left");
        }), options1);
  var options2_onCancel = (function (_event, _meta) {
      
    });
  var options2_threshold = 500;
  var options2_cancelOnMovement = true;
  var options2_detect = "pointer";
  var options2 = {
    onCancel: options2_onCancel,
    threshold: options2_threshold,
    cancelOnMovement: options2_cancelOnMovement,
    detect: options2_detect
  };
  var bindTeam2 = UseLongPress.useLongPress((function (_event, _meta) {
          handleLongPress("Right");
        }), options2);
  var team1El = Core__Option.getOr(children[0], null);
  var team2El = Core__Option.getOr(children[1], null);
  var match$4 = make({
        match: match
      });
  var barLength = match$4[1];
  var favoredTeam = match$4[0];
  var hideScores = scoreLeftValue !== -1 ? (
      scoreLeftValue !== 1 ? false : scoreRightValue === -1
    ) : scoreRightValue === 1;
  var getMatchBorderColor = function () {
    switch (matchHistory) {
      case "NoHistory" :
          return "border-slate-200";
      case "PreviousRound" :
          return "border-amber-400";
      case "LastRound" :
          return "border-red-500";
      
    }
  };
  var getTeamBgColor = function (teamHistory, isWinner) {
    if (isWinner) {
      return "bg-green-50";
    }
    switch (teamHistory) {
      case "NoHistory" :
          return "bg-white";
      case "PreviousRound" :
          return "bg-amber-50";
      case "LastRound" :
          return "bg-red-50";
      
    }
  };
  var getTeamBorderColor = function (teamHistory) {
    switch (teamHistory) {
      case "NoHistory" :
          return "border-b-slate-200 lg:border-b-0";
      case "PreviousRound" :
          return "border-b-amber-400 lg:border-b-0";
      case "LastRound" :
          return "border-b-red-500 lg:border-b-0";
      
    }
  };
  if (match$1[0] !== "Default") {
    return JsxRuntime.jsx(MatchCardEdit.make, {
                match: match,
                courtNumber: courtNumber,
                score: score,
                onDelete: onDelete,
                onSave: (function (completedMatch) {
                    handleSave(completedMatch);
                    setView(function (param) {
                          return "Default";
                        });
                  }),
                onCancel: (function () {
                    setView(function (param) {
                          return "Default";
                        });
                  }),
                team1Element: team1El,
                team2Element: team2El
              });
  }
  var h1 = bindTeam1(undefined);
  var h2 = bindTeam2(undefined);
  return JsxRuntime.jsxs(JsxRuntime.Fragment, {
              children: [
                JsxRuntime.jsxs("div", {
                      children: [
                        JsxRuntime.jsxs("div", {
                              children: [
                                JsxRuntime.jsxs("div", {
                                      children: [
                                        JsxRuntime.jsx("span", {
                                              children: t`Court ${courtNumber.toString()}`,
                                              className: "text-xs font-semibold text-slate-600"
                                            }),
                                        Core__Option.getOr(Core__Option.map(props.onRebalance, (function (rebalanceFn) {
                                                    return JsxRuntime.jsx("button", {
                                                                children: JsxRuntime.jsx(LucideReact.Shuffle, {
                                                                      className: "w-3.5 h-3.5"
                                                                    }),
                                                                "aria-label": t`Rebalance match`,
                                                                className: "p-1 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",
                                                                onClick: (function (param) {
                                                                    rebalanceFn();
                                                                  })
                                                              });
                                                  })), null),
                                        matchHistory !== "NoHistory" ? JsxRuntime.jsxs("div", {
                                                children: [
                                                  JsxRuntime.jsx(LucideReact.AlertTriangle, {
                                                        className: matchHistory === "LastRound" ? "w-3 h-3 text-red-600" : "w-3 h-3 text-amber-600"
                                                      }),
                                                  JsxRuntime.jsx("span", {
                                                        children: matchHistory === "LastRound" ? t`Last Round` : t`Repeat`,
                                                        className: matchHistory === "LastRound" ? "text-xs font-medium text-red-600" : "text-xs font-medium text-amber-600"
                                                      })
                                                ],
                                                className: "flex items-center gap-1"
                                              }) : null,
                                        debug ? JsxRuntime.jsx(MatchCard$MatchQualityDebug, {
                                                match: match
                                              }) : null
                                      ],
                                      className: "flex items-center gap-2"
                                    }),
                                JsxRuntime.jsxs("div", {
                                      children: [
                                        Core__Option.getOr(Core__Option.map(onDelete, (function (deleteFn) {
                                                    return JsxRuntime.jsx(ConfirmButton.make, {
                                                                button: JsxRuntime.jsx("button", {
                                                                      children: JsxRuntime.jsx(LucideReact.Trash2, {
                                                                            className: "w-3.5 h-3.5"
                                                                          }),
                                                                      "aria-label": t`Delete match`,
                                                                      className: "p-1 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",
                                                                      type: "button"
                                                                    }),
                                                                title: t`Delete this match?`,
                                                                description: t`The match will be removed from this round. You can restore the originally scheduled matches using the round reset icon.`,
                                                                onConfirmed: deleteFn
                                                              });
                                                  })), null),
                                        JsxRuntime.jsx("button", {
                                              children: JsxRuntime.jsx(LucideReact.Edit2, {
                                                    className: "w-3.5 h-3.5"
                                                  }),
                                              "aria-label": t`Edit match`,
                                              className: "p-1 text-slate-600 hover:text-blue-600 hover:bg-slate-200 rounded transition-colors",
                                              onClick: (function (param) {
                                                  setView(function (param) {
                                                        return "SubmitMatch";
                                                      });
                                                })
                                            })
                                      ],
                                      className: "flex items-center gap-1"
                                    })
                              ],
                              className: "bg-slate-100 px-2 py-1 border-b border-blue-200 flex items-center justify-between"
                            }),
                        JsxRuntime.jsxs("div", {
                              children: [
                                favoredTeam === 1 ? JsxRuntime.jsxs(JsxRuntime.Fragment, {
                                        children: [
                                          JsxRuntime.jsx("div", {
                                                className: "lg:hidden absolute left-0 top-1/2 w-1 bg-blue-500 -translate-y-full",
                                                style: {
                                                  height: barLength.toFixed(3) + "%"
                                                }
                                              }),
                                          JsxRuntime.jsx("div", {
                                                className: "hidden lg:block absolute left-1/2 bottom-0 h-1 bg-blue-500 -translate-x-full",
                                                style: {
                                                  width: barLength.toFixed(3) + "%"
                                                }
                                              })
                                        ]
                                      }) : null,
                                favoredTeam === 2 ? JsxRuntime.jsxs(JsxRuntime.Fragment, {
                                        children: [
                                          JsxRuntime.jsx("div", {
                                                className: "lg:hidden absolute left-0 top-1/2 w-1 bg-blue-500",
                                                style: {
                                                  height: barLength.toFixed(3) + "%"
                                                }
                                              }),
                                          JsxRuntime.jsx("div", {
                                                className: "hidden lg:block absolute left-1/2 bottom-0 h-1 bg-blue-500",
                                                style: {
                                                  width: barLength.toFixed(3) + "%"
                                                }
                                              })
                                        ]
                                      }) : null,
                                JsxRuntime.jsx("div", {
                                      children: JsxRuntime.jsxs("div", {
                                            children: [
                                              JsxRuntime.jsx("div", {
                                                    children: Caml_obj.equal(currentWinner, "Left") ? JsxRuntime.jsx(LucideReact.Trophy, {
                                                            className: "w-5 h-5 text-yellow-500 fill-yellow-500"
                                                          }) : (
                                                        currentWinner === undefined ? JsxRuntime.jsx(LucideReact.Circle, {
                                                                className: "w-4 h-4 text-blue-500 fill-blue-500"
                                                              }) : (
                                                            currentWinner === undefined && team1History === "LastRound" ? JsxRuntime.jsx(LucideReact.AlertTriangle, {
                                                                    className: "w-4 h-4 text-red-600"
                                                                  }) : (
                                                                currentWinner === undefined && team1History === "PreviousRound" ? JsxRuntime.jsx(LucideReact.AlertTriangle, {
                                                                        className: "w-4 h-4 text-amber-600"
                                                                      }) : null
                                                              )
                                                          )
                                                      ),
                                                    className: "w-5 h-5 flex items-center justify-center flex-shrink-0"
                                                  }),
                                              JsxRuntime.jsx("div", {
                                                    children: team1.map(function (player) {
                                                          var winner = Core__Option.map(currentWinner, (function (w) {
                                                                  if (w === "Left") {
                                                                    return "Left";
                                                                  } else {
                                                                    return "Right";
                                                                  }
                                                                }));
                                                          return JsxRuntime.jsx(PlayerRow.make, {
                                                                      player: player,
                                                                      isEditing: false,
                                                                      winner: winner,
                                                                      teamSide: "Left",
                                                                      skillLevel: normalizeSkillLevel(player.rating.mu),
                                                                      getUserFragmentRefs: getUserFragmentRefs,
                                                                      debug: debug,
                                                                      incrementDisplayCount: true
                                                                    }, player.id);
                                                        }),
                                                    className: "flex flex-col sm:flex-row sm:flex-wrap lg:flex-col gap-1.5 flex-1 min-w-0"
                                                  }),
                                              !hideScores && (scoreLeftValue !== 0 || scoreRightValue !== 0) ? JsxRuntime.jsx("div", {
                                                      children: scoreLeftValue.toString(),
                                                      className: "text-lg font-bold text-slate-800 flex-shrink-0"
                                                    }) : null
                                            ],
                                            className: "flex items-center gap-2 min-w-0"
                                          }),
                                      className: "p-2 lg:pr-2 cursor-pointer transition-all flex-1 lg:flex-none lg:w-1/2 border-b lg:border-b-0 overflow-hidden " + getTeamBgColor(team1History, Caml_obj.equal(currentWinner, "Left")) + " " + getTeamBorderColor(team1History) + " hover:bg-slate-50",
                                      style: {
                                        userSelect: "none"
                                      },
                                      onClick: (function (param) {
                                          handleClick("Left");
                                        }),
                                      onMouseDown: h1.onMouseDown,
                                      onMouseLeave: h1.onMouseLeave,
                                      onMouseMove: h1.onMouseMove,
                                      onMouseUp: h1.onMouseUp,
                                      onTouchEnd: h1.onTouchEnd,
                                      onTouchMove: h1.onTouchMove,
                                      onTouchStart: h1.onTouchStart,
                                      onPointerDown: h1.onPointerDown,
                                      onPointerMove: h1.onPointerMove,
                                      onPointerUp: h1.onPointerUp,
                                      onPointerLeave: h1.onPointerLeave
                                    }),
                                JsxRuntime.jsxs("div", {
                                      children: [
                                        JsxRuntime.jsx("div", {
                                              children: JsxRuntime.jsx("span", {
                                                    children: t`VS`,
                                                    className: "bg-white px-2 text-xs font-bold text-slate-400"
                                                  }),
                                              className: "lg:hidden absolute inset-0 flex items-center justify-center border-b border-slate-200"
                                            }),
                                        JsxRuntime.jsx("div", {
                                              children: JsxRuntime.jsx("span", {
                                                    children: t`VS`,
                                                    className: "absolute bg-white px-1 text-xs font-bold text-slate-400"
                                                  }),
                                              className: "hidden lg:flex relative w-full h-full bg-slate-200 items-center justify-center"
                                            })
                                      ],
                                      className: "relative lg:absolute lg:left-1/2 lg:-translate-x-1/2 lg:top-0 lg:bottom-0 lg:w-px flex items-center justify-center"
                                    }),
                                JsxRuntime.jsx("div", {
                                      children: JsxRuntime.jsxs("div", {
                                            children: [
                                              JsxRuntime.jsx("div", {
                                                    children: Caml_obj.equal(currentWinner, "Right") ? JsxRuntime.jsx(LucideReact.Trophy, {
                                                            className: "w-5 h-5 text-yellow-500 fill-yellow-500"
                                                          }) : (
                                                        currentWinner === undefined && team2History === "LastRound" ? JsxRuntime.jsx(LucideReact.AlertTriangle, {
                                                                className: "w-4 h-4 text-red-600"
                                                              }) : (
                                                            currentWinner === undefined && team2History === "PreviousRound" ? JsxRuntime.jsx(LucideReact.AlertTriangle, {
                                                                    className: "w-4 h-4 text-amber-600"
                                                                  }) : null
                                                          )
                                                      ),
                                                    className: "w-5 h-5 flex items-center justify-center flex-shrink-0 lg:order-3"
                                                  }),
                                              JsxRuntime.jsx("div", {
                                                    children: team2.map(function (player) {
                                                          var winner = Core__Option.map(currentWinner, (function (w) {
                                                                  if (w === "Left") {
                                                                    return "Left";
                                                                  } else {
                                                                    return "Right";
                                                                  }
                                                                }));
                                                          return JsxRuntime.jsx(PlayerRow.make, {
                                                                      player: player,
                                                                      isEditing: false,
                                                                      winner: winner,
                                                                      teamSide: "Right",
                                                                      skillLevel: normalizeSkillLevel(player.rating.mu),
                                                                      getUserFragmentRefs: getUserFragmentRefs,
                                                                      debug: debug,
                                                                      incrementDisplayCount: true
                                                                    }, player.id);
                                                        }),
                                                    className: "flex flex-col sm:flex-row sm:flex-wrap lg:flex-col gap-1.5 flex-1 min-w-0 lg:order-1"
                                                  }),
                                              !hideScores && (scoreLeftValue !== 0 || scoreRightValue !== 0) ? JsxRuntime.jsx("div", {
                                                      children: scoreRightValue.toString(),
                                                      className: "text-lg font-bold text-slate-800 flex-shrink-0 lg:order-2"
                                                    }) : null
                                            ],
                                            className: "flex items-center gap-2 min-w-0"
                                          }),
                                      className: "p-2 lg:pl-2 lg:pr-2 cursor-pointer transition-all flex-1 lg:flex-none lg:w-1/2 overflow-hidden " + getTeamBgColor(team2History, Caml_obj.equal(currentWinner, "Right")) + " hover:bg-slate-50",
                                      style: {
                                        userSelect: "none"
                                      },
                                      onClick: (function (param) {
                                          handleClick("Right");
                                        }),
                                      onMouseDown: h2.onMouseDown,
                                      onMouseLeave: h2.onMouseLeave,
                                      onMouseMove: h2.onMouseMove,
                                      onMouseUp: h2.onMouseUp,
                                      onTouchEnd: h2.onTouchEnd,
                                      onTouchMove: h2.onTouchMove,
                                      onTouchStart: h2.onTouchStart,
                                      onPointerDown: h2.onPointerDown,
                                      onPointerMove: h2.onPointerMove,
                                      onPointerUp: h2.onPointerUp,
                                      onPointerLeave: h2.onPointerLeave
                                    })
                              ],
                              className: "flex flex-col lg:flex-row relative"
                            })
                      ],
                      className: "bg-white rounded-lg border-2 shadow-sm overflow-hidden " + getMatchBorderColor()
                    }),
                Core__Option.getOr(Core__Option.map(match$2[0], (function (winningTeam) {
                            return JsxRuntime.jsx(ScoreModal.make, {
                                        match: match,
                                        winningTeam: winningTeam,
                                        onSubmit: (function (score1, score2) {
                                            var scoreData = [
                                              score1,
                                              score2
                                            ];
                                            handleSave([
                                                  [
                                                    team1,
                                                    team2
                                                  ],
                                                  scoreData
                                                ]);
                                            setSelectedWinner(function (param) {
                                                  
                                                });
                                          }),
                                        onClose: (function () {
                                            setSelectedWinner(function (param) {
                                                  
                                                });
                                          }),
                                        getUserFragmentRefs: getUserFragmentRefs
                                      });
                          })), null)
              ]
            });
}

var make$1 = MatchCard;

export {
  Fragment ,
  PredictionBar ,
  Team ,
  MatchQualityDebug ,
  make$1 as make,
}
/*  Not a pure module */
