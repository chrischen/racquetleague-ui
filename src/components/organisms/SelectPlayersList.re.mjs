// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Rating from "../../lib/Rating.re.mjs";
import * as Session from "../../lib/Session.re.mjs";
import * as RsvpUser from "./RsvpUser.re.mjs";
import * as UiAction from "../atoms/UiAction.re.mjs";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Option from "@rescript/core/src/Core__Option.re.mjs";
import * as Core from "@linaria/core";
import * as EventRsvpUser from "./EventRsvpUser.re.mjs";
import * as FramerMotion from "framer-motion";
import * as JsxRuntime from "react/jsx-runtime";
import * as Solid from "@heroicons/react/24/solid";

import { t, plural } from '@lingui/macro'
;

function SelectPlayersList(props) {
  var onEnable = props.onEnable;
  var onRemove = props.onRemove;
  var onClick = props.onClick;
  var session = props.session;
  var disabled = props.disabled;
  var playing = props.playing;
  var selected = props.selected;
  var players = props.players;
  var match = React.useState(function () {
        return "Rating";
      });
  var setSort = match[1];
  var sort = match[0];
  var players$1;
  players$1 = sort === "Rating" ? Rating.Players.sortByOrdinalDesc(players) : Rating.Players.sortByPlayCountAsc(players, session);
  return JsxRuntime.jsx(FramerMotion.motion.div, {
              className: "bg-gray-100",
              children: Caml_option.some(JsxRuntime.jsxs("table", {
                        children: [
                          JsxRuntime.jsxs("colgroup", {
                                children: [
                                  JsxRuntime.jsx("col", {
                                        className: "w-full sm:w-4/12"
                                      }),
                                  JsxRuntime.jsx("col", {
                                        className: "lg:w-4/12"
                                      }),
                                  JsxRuntime.jsx("col", {
                                        className: "lg:w-2/12"
                                      }),
                                  JsxRuntime.jsx("col", {
                                        className: "lg:w-1/12"
                                      }),
                                  JsxRuntime.jsx("col", {
                                        className: "lg:w-1/12"
                                      }),
                                  JsxRuntime.jsx("col", {
                                        className: "lg:w-1/12"
                                      })
                                ]
                              }),
                          JsxRuntime.jsx("thead", {
                                children: JsxRuntime.jsxs("tr", {
                                      children: [
                                        JsxRuntime.jsx("th", {
                                              children: JsxRuntime.jsxs(UiAction.make, {
                                                    onClick: (function () {
                                                        setSort(function (param) {
                                                              return "Rating";
                                                            });
                                                      }),
                                                    className: "group inline-flex",
                                                    children: [
                                                      t`Player`,
                                                      sort === "Rating" ? JsxRuntime.jsx("span", {
                                                              children: JsxRuntime.jsx(Solid.ChevronDownIcon, {
                                                                    className: "w-5 h-5"
                                                                  }),
                                                              className: "ml-2 flex-none rounded bg-gray-100 text-gray-900 group-hover:bg-gray-200"
                                                            }) : null
                                                    ]
                                                  }),
                                              className: "py-2 pl-4 pr-8 font-semibold sm:pl-6 lg:pl-8",
                                              scope: "col"
                                            }),
                                        JsxRuntime.jsx("th", {
                                              className: "py-2 pl-0 pr-4 text-right font-semibold table-cell sm:pr-6 lg:pr-8",
                                              scope: "col"
                                            }),
                                        JsxRuntime.jsx("th", {
                                              children: JsxRuntime.jsxs(UiAction.make, {
                                                    onClick: (function () {
                                                        setSort(function (param) {
                                                              return "MatchCount";
                                                            });
                                                      }),
                                                    className: "group inline-flex",
                                                    children: [
                                                      t`Match Count`,
                                                      sort === "MatchCount" ? JsxRuntime.jsx("span", {
                                                              children: JsxRuntime.jsx(Solid.ChevronUpIcon, {
                                                                    className: "w-5 h-5"
                                                                  }),
                                                              className: "ml-2 flex-none rounded bg-gray-100 text-gray-900 group-hover:bg-gray-200"
                                                            }) : null
                                                    ]
                                                  }),
                                              className: "py-2 pl-0 pr-4 text-right font-semibold table-cell sm:pr-6 lg:pr-8",
                                              scope: "col"
                                            })
                                      ]
                                    }),
                                className: "border-b border-black/10 text-sm leading-6 text-black"
                              }),
                          JsxRuntime.jsx("tbody", {
                                children: players$1.length !== 0 ? players$1.map(function (player) {
                                        var selected$1 = selected.has(player.id);
                                        var disabled$1 = disabled.has(player.id);
                                        return JsxRuntime.jsxs(FramerMotion.motion.tr, {
                                                    style: {
                                                      originX: 0.05,
                                                      originY: 0.05
                                                    },
                                                    animate: {
                                                      opacity: 1,
                                                      scale: 1
                                                    },
                                                    initial: {
                                                      opacity: 0,
                                                      scale: 1.15
                                                    },
                                                    exit: {
                                                      opacity: 0,
                                                      scale: 1.15
                                                    },
                                                    layout: true,
                                                    children: [
                                                      JsxRuntime.jsx("td", {
                                                            children: JsxRuntime.jsx("div", {
                                                                  children: JsxRuntime.jsx("div", {
                                                                        children: JsxRuntime.jsx(UiAction.make, {
                                                                              onClick: (function () {
                                                                                  onClick(player);
                                                                                }),
                                                                              children: Core__Option.getOr(Core__Option.flatMap(player.data, (function (data) {
                                                                                          return Core__Option.map(data.user, (function (user) {
                                                                                                        return JsxRuntime.jsx(EventRsvpUser.make, {
                                                                                                                    user: user.fragmentRefs
                                                                                                                  });
                                                                                                      }));
                                                                                        })), JsxRuntime.jsx(JsxRuntime.Fragment, {
                                                                                        children: Caml_option.some(JsxRuntime.jsx(RsvpUser.make, {
                                                                                                  user: {
                                                                                                    name: player.name,
                                                                                                    picture: undefined
                                                                                                  }
                                                                                                }))
                                                                                      }))
                                                                            }),
                                                                        className: Core.cx("text-sm w-full font-medium leading-6 text-gray-900", selected$1 ? "" : "opacity-50", disabled$1 ? "line-through" : "")
                                                                      }),
                                                                  className: "flex items-center gap-x-4"
                                                                }),
                                                            className: "py-2 pl-0 pr-8"
                                                          }),
                                                      JsxRuntime.jsx("td", {
                                                            children: selected$1 ? null : (
                                                                disabled$1 ? JsxRuntime.jsx(UiAction.make, {
                                                                        onClick: (function () {
                                                                            onEnable(player);
                                                                          }),
                                                                        children: "Enable"
                                                                      }) : JsxRuntime.jsx(UiAction.make, {
                                                                        onClick: (function () {
                                                                            onRemove(player);
                                                                          }),
                                                                        children: "Remove"
                                                                      })
                                                              )
                                                          }),
                                                      JsxRuntime.jsx("td", {
                                                            children: JsxRuntime.jsxs("div", {
                                                                  children: [
                                                                    JsxRuntime.jsx("div", {
                                                                          children: JsxRuntime.jsx("div", {
                                                                                className: "h-1.5 w-1.5 rounded-full bg-current"
                                                                              }),
                                                                          className: Core.cx(playing.has(player.id) ? "text-green-400 bg-green-400/10" : "hidden", "flex-none rounded-full p-1")
                                                                        }),
                                                                    Session.get(session, player.id).count.toString()
                                                                  ],
                                                                  className: "flex items-center justify-end gap-x-2"
                                                                }),
                                                            className: "py-2 pl-0 pr-4 text-right text-sm leading-6 text-gray-400 table-cell sm:pr-6 lg:pr-8"
                                                          })
                                                    ]
                                                  }, player.id);
                                      }) : t`no players yet`,
                                className: "divide-y divide-black/5"
                              })
                        ],
                        className: "mt-6 w-full whitespace-nowrap text-left"
                      }))
            });
}

var make = SelectPlayersList;

export {
  make ,
}
/*  Not a pure module */
