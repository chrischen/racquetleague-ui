// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as LucideReact from "lucide-react";
import * as JsxRuntime from "react/jsx-runtime";

import { t } from '@lingui/macro'
;

function TeamManagementModal$TeamEditor(props) {
  var onCancel = props.onCancel;
  var onSave = props.onSave;
  var team = props.team;
  var match = React.useState(function () {
        return team.name;
      });
  var setName = match[1];
  var name = match[0];
  var match$1 = React.useState(function () {
        return new Set(team.playerIds);
      });
  var setSelectedPlayerIds = match$1[1];
  var selectedPlayerIds = match$1[0];
  var handleSave = function () {
    onSave({
          id: team.id,
          name: name,
          playerIds: Array.from(selectedPlayerIds.values())
        });
  };
  return JsxRuntime.jsx("div", {
              children: JsxRuntime.jsxs("div", {
                    children: [
                      JsxRuntime.jsxs("div", {
                            children: [
                              JsxRuntime.jsxs("div", {
                                    children: [
                                      JsxRuntime.jsx(LucideReact.Users, {
                                            className: "w-6 h-6 text-blue-600"
                                          }),
                                      JsxRuntime.jsx("h2", {
                                            children: t`Edit Team`,
                                            className: "text-xl font-bold text-slate-800"
                                          })
                                    ],
                                    className: "flex items-center gap-3"
                                  }),
                              JsxRuntime.jsx("button", {
                                    children: JsxRuntime.jsx(LucideReact.X, {
                                          className: "w-5 h-5 text-slate-600"
                                        }),
                                    "aria-label": "Close",
                                    className: "p-2 hover:bg-slate-100 rounded-lg transition-colors",
                                    onClick: (function (param) {
                                        onCancel();
                                      })
                                  })
                            ],
                            className: "bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between flex-shrink-0"
                          }),
                      JsxRuntime.jsxs("div", {
                            children: [
                              JsxRuntime.jsxs("div", {
                                    children: [
                                      JsxRuntime.jsx("label", {
                                            children: t`Team Name`,
                                            className: "block text-sm font-medium text-slate-700 mb-1"
                                          }),
                                      JsxRuntime.jsx("input", {
                                            className: "w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",
                                            placeholder: t`Enter team name`,
                                            type: "text",
                                            value: name,
                                            onChange: (function (e) {
                                                var value = e.target.value;
                                                setName(function (param) {
                                                      return value;
                                                    });
                                              })
                                          })
                                    ]
                                  }),
                              JsxRuntime.jsxs("div", {
                                    children: [
                                      JsxRuntime.jsx("label", {
                                            children: t`Team Members (${selectedPlayerIds.size.toString()})`,
                                            className: "block text-sm font-medium text-slate-700 mb-2"
                                          }),
                                      JsxRuntime.jsx("div", {
                                            children: props.players.map(function (player) {
                                                  var isSelected = selectedPlayerIds.has(player.id);
                                                  var buttonClass = isSelected ? "flex items-center gap-2 p-2 rounded-lg border-2 transition-all text-left border-blue-500 bg-blue-50" : "flex items-center gap-2 p-2 rounded-lg border-2 transition-all text-left border-slate-200 bg-white hover:border-slate-300";
                                                  return JsxRuntime.jsxs("button", {
                                                              children: [
                                                                JsxRuntime.jsx("div", {
                                                                      className: "w-8 h-8 rounded-full bg-slate-200 flex-shrink-0"
                                                                    }),
                                                                JsxRuntime.jsxs("div", {
                                                                      children: [
                                                                        JsxRuntime.jsx("div", {
                                                                              children: player.name,
                                                                              className: "text-sm font-semibold text-slate-800 truncate"
                                                                            }),
                                                                        JsxRuntime.jsx("div", {
                                                                              children: "#" + player.intId.toString(),
                                                                              className: "text-xs text-slate-500"
                                                                            })
                                                                      ],
                                                                      className: "flex-1 min-w-0"
                                                                    }),
                                                                isSelected ? JsxRuntime.jsx("div", {
                                                                        children: JsxRuntime.jsx("svg", {
                                                                              children: JsxRuntime.jsx("path", {
                                                                                    d: "M5 13l4 4L19 7",
                                                                                    strokeLinecap: "round",
                                                                                    strokeLinejoin: "round",
                                                                                    strokeWidth: "3"
                                                                                  }),
                                                                              className: "w-3 h-3 text-white",
                                                                              fill: "none",
                                                                              stroke: "currentColor",
                                                                              viewBox: "0 0 24 24"
                                                                            }),
                                                                        className: "w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0"
                                                                      }) : null
                                                              ],
                                                              className: buttonClass,
                                                              onClick: (function (param) {
                                                                  var playerId = player.id;
                                                                  setSelectedPlayerIds(function (prev) {
                                                                        var newSet = new Set(Array.from(prev.values()));
                                                                        if (prev.has(playerId)) {
                                                                          newSet.delete(playerId);
                                                                        } else {
                                                                          newSet.add(playerId);
                                                                        }
                                                                        return newSet;
                                                                      });
                                                                })
                                                            }, player.id);
                                                }),
                                            className: "grid grid-cols-2 gap-2 max-h-64 overflow-y-auto"
                                          })
                                    ]
                                  })
                            ],
                            className: "flex-1 overflow-y-auto p-6 space-y-4"
                          }),
                      JsxRuntime.jsxs("div", {
                            children: [
                              JsxRuntime.jsx("button", {
                                    children: t`Cancel`,
                                    className: "px-4 py-2 rounded-lg font-medium bg-white border border-slate-300 text-slate-700 hover:bg-slate-50 transition-colors",
                                    onClick: (function (param) {
                                        onCancel();
                                      })
                                  }),
                              JsxRuntime.jsx("button", {
                                    children: t`Save Team`,
                                    className: name.trim() === "" ? "px-6 py-2 rounded-lg font-medium transition-colors shadow-md bg-slate-300 text-slate-500 cursor-not-allowed" : "px-6 py-2 rounded-lg font-medium transition-colors shadow-md bg-blue-600 text-white hover:bg-blue-700",
                                    disabled: name.trim() === "",
                                    onClick: (function (param) {
                                        handleSave();
                                      })
                                  })
                            ],
                            className: "bg-slate-50 border-t border-slate-200 px-6 py-4 flex items-center justify-end gap-3 flex-shrink-0"
                          })
                    ],
                    className: "bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col"
                  }),
              className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
            });
}

var TeamEditor = {
  make: TeamManagementModal$TeamEditor
};

function TeamManagementModal(props) {
  var onClose = props.onClose;
  var onSave = props.onSave;
  var antiTeams = props.antiTeams;
  var teams = props.teams;
  var match = React.useState(function () {
        return teams;
      });
  var setLocalTeams = match[1];
  var localTeams = match[0];
  var match$1 = React.useState(function () {
        return antiTeams;
      });
  var setLocalAntiTeams = match$1[1];
  var localAntiTeams = match$1[0];
  var match$2 = React.useState(function () {
        return "teams";
      });
  var setActiveTab = match$2[1];
  var activeTab = match$2[0];
  var match$3 = React.useState(function () {
        
      });
  var setEditingTeam = match$3[1];
  var editingTeam = match$3[0];
  var match$4 = React.useState(function () {
        return false;
      });
  var setIsCreating = match$4[1];
  var isCreating = match$4[0];
  var handleCreateTeam = function () {
    var newTeam_id = Date.now() | 0;
    var newTeam_name = activeTab === "teams" ? t`New Team` : t`New Anti-Team`;
    var newTeam_playerIds = [];
    var newTeam = {
      id: newTeam_id,
      name: newTeam_name,
      playerIds: newTeam_playerIds
    };
    setEditingTeam(function (param) {
          return newTeam;
        });
    setIsCreating(function (param) {
          return true;
        });
  };
  var handleSaveTeam = function (team) {
    if (isCreating) {
      if (activeTab === "teams") {
        setLocalTeams(function (prev) {
              return prev.concat([team]);
            });
      } else {
        setLocalAntiTeams(function (prev) {
              return prev.concat([team]);
            });
      }
      setIsCreating(function (param) {
            return false;
          });
    } else if (activeTab === "teams") {
      setLocalTeams(function (prev) {
            return prev.map(function (t) {
                        if (t.id === team.id) {
                          return team;
                        } else {
                          return t;
                        }
                      });
          });
    } else {
      setLocalAntiTeams(function (prev) {
            return prev.map(function (t) {
                        if (t.id === team.id) {
                          return team;
                        } else {
                          return t;
                        }
                      });
          });
    }
    setEditingTeam(function (param) {
          
        });
  };
  var handleSave = function () {
    onSave(localTeams, localAntiTeams);
    onClose();
  };
  var currentTeams = activeTab === "teams" ? localTeams : localAntiTeams;
  if (editingTeam !== undefined) {
    return JsxRuntime.jsx(TeamManagementModal$TeamEditor, {
                team: editingTeam,
                players: props.players,
                onSave: handleSaveTeam,
                onCancel: (function () {
                    setEditingTeam(function (param) {
                          
                        });
                    setIsCreating(function (param) {
                          return false;
                        });
                  })
              });
  } else {
    return JsxRuntime.jsx("div", {
                children: JsxRuntime.jsxs("div", {
                      children: [
                        JsxRuntime.jsxs("div", {
                              children: [
                                JsxRuntime.jsxs("div", {
                                      children: [
                                        JsxRuntime.jsx(LucideReact.Users, {
                                              className: "w-6 h-6 text-blue-600"
                                            }),
                                        JsxRuntime.jsxs("div", {
                                              children: [
                                                JsxRuntime.jsx("h2", {
                                                      children: t`Team Management`,
                                                      className: "text-xl font-bold text-slate-800"
                                                    }),
                                                JsxRuntime.jsx("p", {
                                                      children: t`Create and manage player teams`,
                                                      className: "text-sm text-slate-600"
                                                    })
                                              ]
                                            })
                                      ],
                                      className: "flex items-center gap-3"
                                    }),
                                JsxRuntime.jsx("button", {
                                      children: JsxRuntime.jsx(LucideReact.X, {
                                            className: "w-5 h-5 text-slate-600"
                                          }),
                                      "aria-label": "Close",
                                      className: "p-2 hover:bg-slate-100 rounded-lg transition-colors",
                                      onClick: (function (param) {
                                          onClose();
                                        })
                                    })
                              ],
                              className: "bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between flex-shrink-0"
                            }),
                        JsxRuntime.jsxs("div", {
                              children: [
                                JsxRuntime.jsx("button", {
                                      children: t`Teams`,
                                      className: "px-4 py-3 text-sm font-medium border-b-2 transition-colors " + (
                                        activeTab === "teams" ? "border-blue-600 text-blue-600" : "border-transparent text-slate-500 hover:text-slate-700"
                                      ),
                                      onClick: (function (param) {
                                          setActiveTab(function (param) {
                                                return "teams";
                                              });
                                        })
                                    }),
                                JsxRuntime.jsx("button", {
                                      children: t`Anti-Teams`,
                                      className: "px-4 py-3 text-sm font-medium border-b-2 transition-colors " + (
                                        activeTab === "antiTeams" ? "border-blue-600 text-blue-600" : "border-transparent text-slate-500 hover:text-slate-700"
                                      ),
                                      onClick: (function (param) {
                                          setActiveTab(function (param) {
                                                return "antiTeams";
                                              });
                                        })
                                    })
                              ],
                              className: "flex border-b border-slate-200 px-6"
                            }),
                        JsxRuntime.jsx("div", {
                              children: currentTeams.length === 0 ? JsxRuntime.jsxs("div", {
                                      children: [
                                        JsxRuntime.jsx(LucideReact.Users, {
                                              className: "w-16 h-16 mx-auto mb-4 text-slate-300"
                                            }),
                                        JsxRuntime.jsx("p", {
                                              children: activeTab === "teams" ? t`No teams yet` : t`No anti-teams yet`,
                                              className: "text-slate-600 font-medium mb-2"
                                            }),
                                        JsxRuntime.jsx("p", {
                                              children: activeTab === "teams" ? t`Create your first team to get started` : t`Create your first anti-team to prevent players from pairing`,
                                              className: "text-sm text-slate-500"
                                            })
                                      ],
                                      className: "text-center py-12"
                                    }) : JsxRuntime.jsx("div", {
                                      children: currentTeams.map(function (team) {
                                            return JsxRuntime.jsxs("div", {
                                                        children: [
                                                          JsxRuntime.jsxs("div", {
                                                                children: [
                                                                  JsxRuntime.jsx("div", {
                                                                        children: team.name,
                                                                        className: "font-semibold text-slate-800"
                                                                      }),
                                                                  JsxRuntime.jsx("div", {
                                                                        children: team.playerIds.length.toString() + " player" + (
                                                                          team.playerIds.length !== 1 ? "s" : ""
                                                                        ),
                                                                        className: "text-sm text-slate-600"
                                                                      })
                                                                ],
                                                                className: "flex-1 min-w-0"
                                                              }),
                                                          JsxRuntime.jsx("button", {
                                                                children: JsxRuntime.jsx(LucideReact.Edit2, {
                                                                      className: "w-4 h-4 text-slate-600"
                                                                    }),
                                                                className: "p-2 hover:bg-slate-200 rounded-lg transition-colors",
                                                                title: t`Edit team`,
                                                                onClick: (function (param) {
                                                                    setEditingTeam(function (param) {
                                                                          return team;
                                                                        });
                                                                  })
                                                              }),
                                                          JsxRuntime.jsx("button", {
                                                                children: JsxRuntime.jsx(LucideReact.Trash2, {
                                                                      className: "w-4 h-4 text-red-600"
                                                                    }),
                                                                className: "p-2 hover:bg-red-100 rounded-lg transition-colors",
                                                                title: t`Delete team`,
                                                                onClick: (function (param) {
                                                                    var teamId = team.id;
                                                                    if (activeTab === "teams") {
                                                                      return setLocalTeams(function (prev) {
                                                                                  return prev.filter(function (t) {
                                                                                              return t.id !== teamId;
                                                                                            });
                                                                                });
                                                                    } else {
                                                                      return setLocalAntiTeams(function (prev) {
                                                                                  return prev.filter(function (t) {
                                                                                              return t.id !== teamId;
                                                                                            });
                                                                                });
                                                                    }
                                                                  })
                                                              })
                                                        ],
                                                        className: "flex items-center gap-3 p-4 bg-slate-50 rounded-lg border border-slate-200"
                                                      }, team.id.toString());
                                          }),
                                      className: "space-y-3"
                                    }),
                              className: "flex-1 overflow-y-auto p-6"
                            }),
                        JsxRuntime.jsxs("div", {
                              children: [
                                JsxRuntime.jsxs("button", {
                                      children: [
                                        JsxRuntime.jsx(LucideReact.Plus, {
                                              className: "w-4 h-4"
                                            }),
                                        activeTab === "teams" ? t`Create Team` : t`Create Anti-Team`
                                      ],
                                      className: "px-4 py-2 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center gap-2",
                                      onClick: (function (param) {
                                          handleCreateTeam();
                                        })
                                    }),
                                JsxRuntime.jsx("button", {
                                      children: t`Save & Close`,
                                      className: "px-6 py-2 rounded-lg font-medium bg-slate-800 text-white hover:bg-slate-900 transition-colors shadow-md",
                                      onClick: (function (param) {
                                          handleSave();
                                        })
                                    })
                              ],
                              className: "bg-slate-50 border-t border-slate-200 px-6 py-4 flex items-center justify-between flex-shrink-0"
                            })
                      ],
                      className: "bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col"
                    }),
                className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
              });
  }
}

var make = TeamManagementModal;

export {
  TeamEditor ,
  make ,
}
/*  Not a pure module */
