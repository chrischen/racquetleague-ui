// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Rating from "../../lib/Rating.re.mjs";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";
import * as EventRsvp from "./EventRsvp.re.mjs";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Array from "@rescript/core/src/Core__Array.re.mjs";
import * as Core__Option from "@rescript/core/src/Core__Option.re.mjs";
import * as WarningAlert from "../molecules/WarningAlert.re.mjs";
import * as LucideReact from "lucide-react";
import * as RelayRuntime from "relay-runtime";
import * as ReactExperimental from "rescript-relay/src/ReactExperimental.re.mjs";
import * as JsxRuntime from "react/jsx-runtime";
import * as AppContext from "../layouts/appContext";
import * as RescriptRelay_Fragment from "rescript-relay/src/RescriptRelay_Fragment.re.mjs";
import * as RescriptRelay_Mutation from "rescript-relay/src/RescriptRelay_Mutation.re.mjs";
import * as RSVPSection_user_graphql from "../../__generated__/RSVPSection_user_graphql.re.mjs";
import * as Solid from "@heroicons/react/24/solid";
import * as RSVPSection_event_graphql from "../../__generated__/RSVPSection_event_graphql.re.mjs";
import * as EventMessages_query_graphql from "../../__generated__/EventMessages_query_graphql.re.mjs";
import * as RSVPSectionJoinMutation_graphql from "../../__generated__/RSVPSectionJoinMutation_graphql.re.mjs";
import * as RSVPSectionRefetchQuery_graphql from "../../__generated__/RSVPSectionRefetchQuery_graphql.re.mjs";
import * as RSVPSectionLeaveMutation_graphql from "../../__generated__/RSVPSectionLeaveMutation_graphql.re.mjs";
import * as RSVPSectionCreateRatingMutation_graphql from "../../__generated__/RSVPSectionCreateRatingMutation_graphql.re.mjs";
import * as RSVPSectionUpdateMessageMutation_graphql from "../../__generated__/RSVPSectionUpdateMessageMutation_graphql.re.mjs";

import { css, cx } from '@linaria/core'
;

import { t, plural } from '@lingui/macro'
;

var getConnectionNodes = RSVPSection_event_graphql.Utils.getConnectionNodes;

var convertFragment = RSVPSection_event_graphql.Internal.convertFragment;

function use(fRef) {
  return RescriptRelay_Fragment.useFragment(RSVPSection_event_graphql.node, convertFragment, fRef);
}

function useOpt(fRef) {
  return RescriptRelay_Fragment.useFragmentOpt(fRef !== undefined ? Caml_option.some(Caml_option.valFromOption(fRef)) : undefined, RSVPSection_event_graphql.node, convertFragment);
}

var makeRefetchVariables = RSVPSectionRefetchQuery_graphql.Types.makeRefetchVariables;

var convertRefetchVariables = RSVPSectionRefetchQuery_graphql.Internal.convertVariables;

function useRefetchable(fRef) {
  return RescriptRelay_Fragment.useRefetchableFragment(RSVPSection_event_graphql.node, convertFragment, convertRefetchVariables, fRef);
}

function usePagination(fRef) {
  return RescriptRelay_Fragment.usePaginationFragment(RSVPSection_event_graphql.node, fRef, convertFragment, convertRefetchVariables);
}

function useBlockingPagination(fRef) {
  return RescriptRelay_Fragment.useBlockingPaginationFragment(RSVPSection_event_graphql.node, fRef, convertFragment, convertRefetchVariables);
}

var Fragment = {
  getConnectionNodes: getConnectionNodes,
  Types: undefined,
  Operation: undefined,
  convertFragment: convertFragment,
  use: use,
  useOpt: useOpt,
  makeRefetchVariables: makeRefetchVariables,
  convertRefetchVariables: convertRefetchVariables,
  useRefetchable: useRefetchable,
  usePagination: usePagination,
  useBlockingPagination: useBlockingPagination
};

var convertFragment$1 = RSVPSection_user_graphql.Internal.convertFragment;

function use$1(fRef) {
  return RescriptRelay_Fragment.useFragment(RSVPSection_user_graphql.node, convertFragment$1, fRef);
}

function useOpt$1(fRef) {
  return RescriptRelay_Fragment.useFragmentOpt(fRef !== undefined ? Caml_option.some(Caml_option.valFromOption(fRef)) : undefined, RSVPSection_user_graphql.node, convertFragment$1);
}

var UserFragment = {
  Types: undefined,
  Operation: undefined,
  convertFragment: convertFragment$1,
  use: use$1,
  useOpt: useOpt$1
};

var convertVariables = RSVPSectionJoinMutation_graphql.Internal.convertVariables;

var convertResponse = RSVPSectionJoinMutation_graphql.Internal.convertResponse;

var convertWrapRawResponse = RSVPSectionJoinMutation_graphql.Internal.convertWrapRawResponse;

var commitMutation = RescriptRelay_Mutation.commitMutation(convertVariables, RSVPSectionJoinMutation_graphql.node, convertResponse, convertWrapRawResponse);

var use$2 = RescriptRelay_Mutation.useMutation(convertVariables, RSVPSectionJoinMutation_graphql.node, convertResponse, convertWrapRawResponse);

var RSVPSectionJoinMutation = {
  Operation: undefined,
  Types: undefined,
  convertVariables: convertVariables,
  convertResponse: convertResponse,
  convertWrapRawResponse: convertWrapRawResponse,
  commitMutation: commitMutation,
  use: use$2
};

var convertVariables$1 = RSVPSectionCreateRatingMutation_graphql.Internal.convertVariables;

var convertResponse$1 = RSVPSectionCreateRatingMutation_graphql.Internal.convertResponse;

var convertWrapRawResponse$1 = RSVPSectionCreateRatingMutation_graphql.Internal.convertWrapRawResponse;

var commitMutation$1 = RescriptRelay_Mutation.commitMutation(convertVariables$1, RSVPSectionCreateRatingMutation_graphql.node, convertResponse$1, convertWrapRawResponse$1);

var use$3 = RescriptRelay_Mutation.useMutation(convertVariables$1, RSVPSectionCreateRatingMutation_graphql.node, convertResponse$1, convertWrapRawResponse$1);

var RSVPSectionCreateRatingMutation = {
  Operation: undefined,
  Types: undefined,
  convertVariables: convertVariables$1,
  convertResponse: convertResponse$1,
  convertWrapRawResponse: convertWrapRawResponse$1,
  commitMutation: commitMutation$1,
  use: use$3
};

var convertVariables$2 = RSVPSectionLeaveMutation_graphql.Internal.convertVariables;

var convertResponse$2 = RSVPSectionLeaveMutation_graphql.Internal.convertResponse;

var convertWrapRawResponse$2 = RSVPSectionLeaveMutation_graphql.Internal.convertWrapRawResponse;

var commitMutation$2 = RescriptRelay_Mutation.commitMutation(convertVariables$2, RSVPSectionLeaveMutation_graphql.node, convertResponse$2, convertWrapRawResponse$2);

var use$4 = RescriptRelay_Mutation.useMutation(convertVariables$2, RSVPSectionLeaveMutation_graphql.node, convertResponse$2, convertWrapRawResponse$2);

var RSVPSectionLeaveMutation = {
  Operation: undefined,
  Types: undefined,
  convertVariables: convertVariables$2,
  convertResponse: convertResponse$2,
  convertWrapRawResponse: convertWrapRawResponse$2,
  commitMutation: commitMutation$2,
  use: use$4
};

var convertVariables$3 = RSVPSectionUpdateMessageMutation_graphql.Internal.convertVariables;

var convertResponse$3 = RSVPSectionUpdateMessageMutation_graphql.Internal.convertResponse;

var convertWrapRawResponse$3 = RSVPSectionUpdateMessageMutation_graphql.Internal.convertWrapRawResponse;

var commitMutation$3 = RescriptRelay_Mutation.commitMutation(convertVariables$3, RSVPSectionUpdateMessageMutation_graphql.node, convertResponse$3, convertWrapRawResponse$3);

var use$5 = RescriptRelay_Mutation.useMutation(convertVariables$3, RSVPSectionUpdateMessageMutation_graphql.node, convertResponse$3, convertWrapRawResponse$3);

var RSVPSectionUpdateMessageMutation = {
  Operation: undefined,
  Types: undefined,
  convertVariables: convertVariables$3,
  convertResponse: convertResponse$3,
  convertWrapRawResponse: convertWrapRawResponse$3,
  commitMutation: commitMutation$3,
  use: use$5
};

var sessionContext = AppContext.SessionContext;

function isRestrictedRsvp(listType) {
  if (Caml_obj.notequal(listType, 0)) {
    return listType !== undefined;
  } else {
    return false;
  }
}

function RSVPSection$ViewerStatusMessage(props) {
  var message = props.message;
  var eventId = props.eventId;
  var match = React.useState(function () {
        return false;
      });
  var setIsEditing = match[1];
  var match$1 = React.useState(function () {
        return Core__Option.getOr(message, "");
      });
  var setEditedMessage = match$1[1];
  var editedMessage = match$1[0];
  var match$2 = use$5();
  var commitMutationUpdateMessage = match$2[0];
  var handleSave = function () {
    var trimmedMessage = editedMessage.trim();
    if (trimmedMessage !== "") {
      var connectionId = EventMessages_query_graphql.makeConnectionId("client:root", eventId + ".updated");
      commitMutationUpdateMessage({
            connections: [connectionId],
            input: {
              eventId: eventId,
              message: trimmedMessage
            }
          }, undefined, undefined, undefined, undefined, undefined, undefined);
    }
    setIsEditing(function (param) {
          return false;
        });
  };
  var content = message !== undefined ? (
      message === "" ? t`Type a status message for people to see... such as 'I will arrive at 19:00.'` : message
    ) : t`Type a status message for people to see... such as 'I will arrive at 19:00.'`;
  if (match[0]) {
    return JsxRuntime.jsxs("div", {
                children: [
                  JsxRuntime.jsx("div", {
                        children: JsxRuntime.jsx("input", {
                              className: "block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",
                              value: editedMessage,
                              onChange: (function (e) {
                                  setEditedMessage(e.target.value);
                                })
                            }),
                        className: "flex-grow"
                      }),
                  JsxRuntime.jsx("button", {
                        children: t`Save`,
                        className: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",
                        onClick: (function (param) {
                            handleSave();
                          })
                      })
                ],
                className: "flex items-center gap-x-2 mt-2"
              });
  } else {
    return JsxRuntime.jsx("div", {
                children: JsxRuntime.jsxs("p", {
                      children: [
                        content,
                        JsxRuntime.jsx(LucideReact.Pencil, {
                              className: "inline h-4 w-4 ml-2 text-gray-400 invisible group-hover:visible"
                            })
                      ],
                      className: "flex-auto"
                    }),
                className: "flex items-center text-sm text-gray-500 mt-4 group cursor-pointer",
                onClick: (function (param) {
                    setIsEditing(function (param) {
                          return true;
                        });
                  })
              });
  }
}

var ViewerStatusMessage = {
  make: RSVPSection$ViewerStatusMessage
};

function RSVPSection(props) {
  var $$event = props.event;
  var match = ReactExperimental.useTransition();
  var startTransition = match[1];
  var match$1 = usePagination($$event);
  var isLoadingNext = match$1.isLoadingNext;
  var loadNext = match$1.loadNext;
  var data = match$1.data;
  var match$2 = use($$event);
  var minRating = match$2.minRating;
  var maxRsvps = match$2.maxRsvps;
  var activity = match$2.activity;
  var __id = match$2.__id;
  var viewer = Core__Option.map(props.user, (function (user) {
          return use$1(user);
        }));
  var rsvps = getConnectionNodes(data.rsvps);
  var match$3 = use$2();
  var commitMutationJoin = match$3[0];
  var match$4 = use$4();
  var commitMutationLeave = match$4[0];
  var match$5 = use$3();
  var commitMutationCreateRating = match$5[0];
  var isWaitlist = function (count) {
    return Core__Option.isSome(Core__Option.flatMap(maxRsvps, (function (max) {
                      if (count >= max) {
                        return Caml_option.some(undefined);
                      }
                      
                    })));
  };
  var mainList = rsvps.filter(function (edge) {
        if (edge.listType === undefined) {
          return true;
        } else {
          return Caml_obj.equal(edge.listType, 0);
        }
      });
  var confirmedRsvps = mainList.filter(function (param, i) {
          return !isWaitlist(i);
        }).toSorted(function (a, b) {
        var userA = Core__Option.getOr(Core__Option.flatMap(a.rating, (function (rating) {
                    return rating.mu;
                  })), 0);
        var userB = Core__Option.getOr(Core__Option.flatMap(b.rating, (function (rating) {
                    return rating.mu;
                  })), 0);
        if (userB > userA) {
          return 1;
        } else if (userB < userA) {
          return -1;
        } else {
          return 0;
        }
      });
  var waitlistRsvps = mainList.filter(function (param, i) {
        return isWaitlist(i);
      });
  var restrictedRsvps = rsvps.filter(function (edge) {
        return isRestrictedRsvp(edge.listType);
      });
  var viewerRsvp = Core__Option.flatMap(viewer, (function (viewer) {
          return rsvps.find(function (edge) {
                      return Core__Option.getOr(Core__Option.map(edge.user, (function (user) {
                                        return viewer.id === user.id;
                                      })), false);
                    });
        }));
  var viewerHasRsvp = Core__Option.isSome(viewerRsvp);
  var match$6 = Core__Option.getOr(Core__Option.map(viewerRsvp, (function (rsvp) {
              if (isRestrictedRsvp(rsvp.listType)) {
                return [
                        false,
                        true
                      ];
              }
              var viewerIndex = mainList.findIndex(function (edge) {
                    return edge.id === rsvp.id;
                  });
              if (viewerIndex >= 0) {
                return [
                        isWaitlist(viewerIndex),
                        false
                      ];
              } else {
                return [
                        false,
                        false
                      ];
              }
            })), [
        false,
        false
      ]);
  var viewerCanJoin = Core__Option.map(minRating, (function (minRating) {
          var rating = Core__Option.getOr(Core__Option.flatMap(viewer, (function (viewer) {
                      return Core__Option.flatMap(viewer.eventRating, (function (r) {
                                    return r.ordinal;
                                  }));
                    })), Rating.Rating.ordinal(Rating.Rating.makeDefault()));
          return rating >= minRating;
        }));
  var viewerLowerRating = Core__Option.getOr(Core__Option.flatMap(viewer, (function (viewer) {
              return Core__Option.flatMap(viewer.eventRating, (function (r) {
                            return r.ordinal;
                          }));
            })), Rating.Rating.ordinal(Rating.Rating.makeDefault()));
  var viewerUpperRating = Core__Option.getOr(Core__Option.flatMap(viewer, (function (viewer) {
              return Core__Option.flatMap(viewer.eventRating, (function (r) {
                            return r.mu;
                          }));
            })), Rating.Rating.ordinal(Rating.Rating.makeDefault()));
  var viewerStatusMessage = Core__Option.flatMap(viewer, (function (viewer) {
          return Core__Option.flatMap(rsvps.find(function (edge) {
                          return Core__Option.getOr(Core__Option.map(edge.user, (function (user) {
                                            return viewer.id === user.id;
                                          })), false);
                        }), (function (edge) {
                        return edge.message;
                      }));
        }));
  var ratingWarning = viewer !== undefined && viewerCanJoin !== undefined && !viewerCanJoin ? JsxRuntime.jsx("div", {
          children: JsxRuntime.jsxs(WarningAlert.make, {
                children: [
                  t`Required rating: ${Core__Option.getOr(minRating, 0).toFixed(2)} (DUPR ${Rating.guessDupr(Core__Option.getOr(minRating, 0)).toFixed(2)})`,
                  JsxRuntime.jsx("br", {}),
                  t`Your rating ${viewerLowerRating.toFixed(2)} ~ ${viewerUpperRating.toFixed(2)} (DUPR ${Rating.guessDupr(viewerLowerRating).toFixed(2)} ~ ${Rating.guessDupr(viewerUpperRating).toFixed(2)}) is too low. You will be placed in the pending list until the rating limit is lowered. Please join another JPL rated event to boost your rating.`
                ],
                cta: "",
                ctaClick: (function () {
                    
                  })
              }),
          className: "mb-3"
        }) : null;
  var maxRating = Core__Array.reduce(rsvps, 0, (function (max, edge) {
          var currentRating = Core__Option.getOr(Core__Option.flatMap(edge.rating, (function (rating) {
                      return rating.mu;
                    })), 0);
          if (currentRating > max) {
            return currentRating;
          } else {
            return max;
          }
        }));
  var match$7 = viewerHasRsvp ? (
      match$6[1] ? [
          t`Pending`,
          "bg-red-600 text-white"
        ] : (
          match$6[0] ? [
              t`You're Waitlisted`,
              "bg-yellow-500 text-white"
            ] : [
              t`You're Going`,
              "bg-green-600 text-white"
            ]
        )
    ) : [
      t`Join`,
      "bg-green-100 text-green-800 hover:bg-green-200"
    ];
  var match$8 = React.useState(function () {
        return false;
      });
  var setExpanded = match$8[1];
  var expanded = match$8[0];
  var displayedGoingRsvps = expanded ? confirmedRsvps : confirmedRsvps.slice(0, 3);
  return JsxRuntime.jsxs("div", {
              children: [
                JsxRuntime.jsxs("div", {
                      children: [
                        JsxRuntime.jsx("h2", {
                              children: t`RSVP`,
                              className: "text-lg font-semibold mb-4"
                            }),
                        ratingWarning,
                        JsxRuntime.jsx("div", {
                              children: JsxRuntime.jsxs("button", {
                                    children: [
                                      JsxRuntime.jsx(Solid.CheckIcon, {
                                            className: "w-4 h-4"
                                          }),
                                      JsxRuntime.jsx("span", {
                                            children: match$7[0]
                                          })
                                    ],
                                    className: "w-full py-2 px-4 rounded-md flex items-center justify-center space-x-1 " + match$7[1],
                                    onClick: (function (param) {
                                        var status = "going";
                                        if (status === "going") {
                                          if (viewerHasRsvp) {
                                            var connectionId = RelayRuntime.ConnectionHandler.getConnectionID(__id, "RSVPSection_event_rsvps", undefined);
                                            commitMutationLeave({
                                                  connections: [connectionId],
                                                  id: __id
                                                }, undefined, undefined, undefined, undefined, undefined, undefined);
                                            return ;
                                          } else {
                                            var connectionId$1 = RelayRuntime.ConnectionHandler.getConnectionID(__id, "RSVPSection_event_rsvps", undefined);
                                            commitMutationCreateRating(undefined, undefined, undefined, undefined, undefined, undefined, undefined);
                                            commitMutationJoin({
                                                  connections: [connectionId$1],
                                                  id: __id
                                                }, undefined, undefined, undefined, undefined, undefined, undefined);
                                            return ;
                                          }
                                        }
                                        
                                      })
                                  }),
                              className: "flex mb-6"
                            }),
                        JsxRuntime.jsx("div", {
                              children: viewerHasRsvp ? JsxRuntime.jsx(RSVPSection$ViewerStatusMessage, {
                                      eventId: data.id,
                                      message: viewerStatusMessage
                                    }) : null,
                              className: "mb-5"
                            })
                      ],
                      className: "p-4 md:p-6 flex-shrink-0"
                    }),
                JsxRuntime.jsxs("div", {
                      children: [
                        JsxRuntime.jsxs("div", {
                              children: [
                                JsxRuntime.jsxs("div", {
                                      children: [
                                        JsxRuntime.jsxs("h3", {
                                              children: [
                                                t`Going`,
                                                " (",
                                                confirmedRsvps.length.toString(),
                                                ")"
                                              ],
                                              className: "font-medium text-gray-900"
                                            }),
                                        confirmedRsvps.length > 3 || waitlistRsvps.length > 0 || restrictedRsvps.length > 0 || restrictedRsvps.length > 0 ? JsxRuntime.jsx("button", {
                                                children: expanded ? JsxRuntime.jsxs(JsxRuntime.Fragment, {
                                                        children: [
                                                          JsxRuntime.jsx("span", {
                                                                children: t`Show less`
                                                              }),
                                                          JsxRuntime.jsx(Solid.ChevronUpIcon, {
                                                                className: "w-4 h-4 ml-1"
                                                              })
                                                        ]
                                                      }) : JsxRuntime.jsxs(JsxRuntime.Fragment, {
                                                        children: [
                                                          JsxRuntime.jsx("span", {
                                                                children: t`Show all`
                                                              }),
                                                          JsxRuntime.jsx(Solid.ChevronDownIcon, {
                                                                className: "w-4 h-4 ml-1"
                                                              })
                                                        ]
                                                      }),
                                                className: "text-sm text-blue-600 hover:text-blue-800 flex items-center",
                                                onClick: (function (param) {
                                                    setExpanded(function (prev) {
                                                          return !prev;
                                                        });
                                                  })
                                              }) : null
                                      ],
                                      className: "flex justify-between items-center mb-3"
                                    }),
                                JsxRuntime.jsxs("div", {
                                      children: [
                                        displayedGoingRsvps.map(function (edge, param) {
                                              return JsxRuntime.jsx(EventRsvp.make, {
                                                          rsvp: edge.fragmentRefs,
                                                          viewer: viewer,
                                                          activitySlug: Core__Option.flatMap(activity, (function (a) {
                                                                  return a.slug;
                                                                })),
                                                          maxRating: maxRating
                                                        }, edge.id);
                                            }),
                                        !expanded && confirmedRsvps.length > 3 ? JsxRuntime.jsx("div", {
                                                children: JsxRuntime.jsx("span", {
                                                      children: t`+${(confirmedRsvps.length - 3 | 0).toString()} more`,
                                                      className: "text-sm"
                                                    }),
                                                className: "flex items-center cursor-pointer text-blue-600 hover:text-blue-800",
                                                onClick: (function (param) {
                                                    setExpanded(function (param) {
                                                          return true;
                                                        });
                                                  })
                                              }) : null
                                      ],
                                      className: "flex flex-wrap gap-3"
                                    })
                              ],
                              className: "mb-5"
                            }),
                        expanded && waitlistRsvps.length > 0 ? JsxRuntime.jsxs("div", {
                                children: [
                                  JsxRuntime.jsxs("h3", {
                                        children: [
                                          t`Waitlist`,
                                          " (",
                                          waitlistRsvps.length.toString(),
                                          ")"
                                        ],
                                        className: "font-medium text-gray-900 mb-3"
                                      }),
                                  JsxRuntime.jsx("div", {
                                        children: waitlistRsvps.map(function (edge, i) {
                                              return JsxRuntime.jsxs("div", {
                                                          children: [
                                                            JsxRuntime.jsx("span", {
                                                                  children: (i + 1 | 0).toString(),
                                                                  className: "flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-xs font-medium text-gray-600"
                                                                }),
                                                            JsxRuntime.jsx(EventRsvp.make, {
                                                                  rsvp: edge.fragmentRefs,
                                                                  viewer: viewer,
                                                                  activitySlug: Core__Option.flatMap(activity, (function (a) {
                                                                          return a.slug;
                                                                        })),
                                                                  maxRating: maxRating
                                                                })
                                                          ],
                                                          className: "flex items-center space-x-3"
                                                        }, edge.id);
                                            }),
                                        className: "space-y-2"
                                      })
                                ]
                              }) : null,
                        expanded && restrictedRsvps.length > 0 ? JsxRuntime.jsxs("div", {
                                children: [
                                  JsxRuntime.jsxs("h3", {
                                        children: [
                                          t`Pending`,
                                          " (",
                                          restrictedRsvps.length.toString(),
                                          ")"
                                        ],
                                        className: "font-medium text-gray-900 mb-3"
                                      }),
                                  JsxRuntime.jsx("div", {
                                        children: restrictedRsvps.map(function (edge, param) {
                                              return JsxRuntime.jsx(EventRsvp.make, {
                                                          rsvp: edge.fragmentRefs,
                                                          viewer: viewer,
                                                          activitySlug: Core__Option.flatMap(activity, (function (a) {
                                                                  return a.slug;
                                                                })),
                                                          maxRating: maxRating
                                                        }, edge.id);
                                            }),
                                        className: "flex flex-wrap gap-3"
                                      })
                                ],
                                className: "mt-5"
                              }) : null,
                        match$1.hasNext || isLoadingNext ? JsxRuntime.jsx("div", {
                                children: isLoadingNext ? JsxRuntime.jsx("span", {
                                        children: t`Loading...`,
                                        className: "text-sm text-gray-500"
                                      }) : JsxRuntime.jsx("button", {
                                        children: t`Load more`,
                                        className: "text-sm font-medium text-blue-600 hover:underline",
                                        onClick: (function (param) {
                                            startTransition(function () {
                                                  loadNext(80, undefined);
                                                });
                                          })
                                      }),
                                className: "mt-4 text-center"
                              }) : null
                      ],
                      className: "flex-1 overflow-y-auto p-4 md:p-6 pt-0 md:pt-0"
                    })
              ],
              className: "fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t md:border-t-0 md:relative md:rounded-lg md:shadow-sm md:mt-4 z-10 max-h-[75vh] md:max-h-none flex flex-col"
            });
}

var make = RSVPSection;

export {
  Fragment ,
  UserFragment ,
  RSVPSectionJoinMutation ,
  RSVPSectionCreateRatingMutation ,
  RSVPSectionLeaveMutation ,
  RSVPSectionUpdateMessageMutation ,
  sessionContext ,
  isRestrictedRsvp ,
  ViewerStatusMessage ,
  make ,
}
/*  Not a pure module */
