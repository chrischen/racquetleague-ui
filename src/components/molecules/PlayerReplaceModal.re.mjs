// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Option from "@rescript/core/src/Core__Option.re.mjs";
import * as LucideReact from "lucide-react";
import * as JsxRuntime from "react/jsx-runtime";
import * as RescriptRelay_Fragment from "rescript-relay/src/RescriptRelay_Fragment.re.mjs";
import * as PlayerReplaceModal_user_graphql from "../../__generated__/PlayerReplaceModal_user_graphql.re.mjs";

import { t } from '@lingui/macro'
;

var convertFragment = PlayerReplaceModal_user_graphql.Internal.convertFragment;

function use(fRef) {
  return RescriptRelay_Fragment.useFragment(PlayerReplaceModal_user_graphql.node, convertFragment, fRef);
}

function useOpt(fRef) {
  return RescriptRelay_Fragment.useFragmentOpt(fRef !== undefined ? Caml_option.some(Caml_option.valFromOption(fRef)) : undefined, PlayerReplaceModal_user_graphql.node, convertFragment);
}

var Fragment = {
  Types: undefined,
  Operation: undefined,
  convertFragment: convertFragment,
  use: use,
  useOpt: useOpt
};

function getSkillColor(skillLevel) {
  if (skillLevel >= 75.0) {
    return "#10b981";
  } else if (skillLevel >= 50.0) {
    return "#3b82f6";
  } else if (skillLevel >= 25.0) {
    return "#f59e0b";
  } else {
    return "#ef4444";
  }
}

function PlayerReplaceModal(props) {
  var getUserFragmentRefs = props.getUserFragmentRefs;
  var onClose = props.onClose;
  var onSelect = props.onSelect;
  var availablePlayers = props.availablePlayers;
  return JsxRuntime.jsx("div", {
              children: JsxRuntime.jsxs("div", {
                    children: [
                      JsxRuntime.jsxs("div", {
                            children: [
                              JsxRuntime.jsxs("div", {
                                    children: [
                                      JsxRuntime.jsx(LucideReact.Users, {
                                            className: "w-6 h-6 text-blue-600"
                                          }),
                                      JsxRuntime.jsxs("div", {
                                            children: [
                                              JsxRuntime.jsx("h2", {
                                                    children: t`Replace Player`,
                                                    className: "text-xl font-bold text-slate-800"
                                                  }),
                                              JsxRuntime.jsxs("p", {
                                                    children: [
                                                      t`Replacing: `,
                                                      JsxRuntime.jsx("span", {
                                                            children: props.currentPlayer.name,
                                                            className: "font-semibold"
                                                          })
                                                    ],
                                                    className: "text-sm text-slate-600"
                                                  })
                                            ]
                                          })
                                    ],
                                    className: "flex items-center gap-3"
                                  }),
                              JsxRuntime.jsx("button", {
                                    children: JsxRuntime.jsx(LucideReact.X, {
                                          className: "w-5 h-5 text-slate-600"
                                        }),
                                    "aria-label": "Close",
                                    className: "p-2 hover:bg-slate-100 rounded-lg transition-colors",
                                    onClick: (function (param) {
                                        onClose();
                                      })
                                  })
                            ],
                            className: "sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between"
                          }),
                      JsxRuntime.jsx("div", {
                            children: availablePlayers.length === 0 ? JsxRuntime.jsxs("div", {
                                    children: [
                                      JsxRuntime.jsx(LucideReact.Users, {
                                            className: "w-12 h-12 mx-auto mb-3 text-slate-300"
                                          }),
                                      JsxRuntime.jsx("p", {
                                            children: t`No available players`,
                                            className: "font-medium"
                                          }),
                                      JsxRuntime.jsx("p", {
                                            children: t`All checked-in players are already in this round`,
                                            className: "text-sm"
                                          })
                                    ],
                                    className: "text-center py-8 text-slate-500"
                                  }) : JsxRuntime.jsx("div", {
                                    children: availablePlayers.map(function (player) {
                                          var skillLevel = player.ratingOrdinal;
                                          var skillColor = getSkillColor(skillLevel);
                                          var circumference = 2.0 * Math.PI * 18.0;
                                          var progress = skillLevel / 100.0 * circumference;
                                          var picture = Core__Option.flatMap(Core__Option.flatMap(player.data, getUserFragmentRefs), (function (fragmentRefs) {
                                                  return use(fragmentRefs).picture;
                                                }));
                                          return JsxRuntime.jsxs("button", {
                                                      children: [
                                                        JsxRuntime.jsxs("div", {
                                                              children: [
                                                                JsxRuntime.jsxs("svg", {
                                                                      children: [
                                                                        JsxRuntime.jsx("circle", {
                                                                              cx: "20",
                                                                              cy: "20",
                                                                              fill: "none",
                                                                              r: (18.0).toString(),
                                                                              stroke: "#e5e7eb",
                                                                              strokeWidth: "2"
                                                                            }),
                                                                        JsxRuntime.jsx("circle", {
                                                                              cx: "20",
                                                                              cy: "20",
                                                                              fill: "none",
                                                                              r: (18.0).toString(),
                                                                              stroke: skillColor,
                                                                              strokeDasharray: circumference.toString(),
                                                                              strokeDashoffset: (circumference - progress).toString(),
                                                                              strokeLinecap: "round",
                                                                              strokeWidth: "2"
                                                                            })
                                                                      ],
                                                                      className: "w-12 h-12 -rotate-90",
                                                                      viewBox: "0 0 40 40"
                                                                    }),
                                                                Core__Option.getOr(Core__Option.map(picture, (function (src) {
                                                                            return JsxRuntime.jsx("img", {
                                                                                        className: "absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-9 h-9 rounded-full object-cover",
                                                                                        alt: player.name,
                                                                                        src: src
                                                                                      });
                                                                          })), JsxRuntime.jsx("div", {
                                                                          className: "absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-9 h-9 rounded-full bg-gray-200"
                                                                        }))
                                                              ],
                                                              className: "relative flex-shrink-0"
                                                            }),
                                                        JsxRuntime.jsxs("div", {
                                                              children: [
                                                                JsxRuntime.jsx("span", {
                                                                      children: player.name,
                                                                      className: "text-base font-bold text-slate-800 truncate"
                                                                    }),
                                                                JsxRuntime.jsxs("div", {
                                                                      children: [
                                                                        JsxRuntime.jsx("span", {
                                                                              children: "#" + player.intId.toString(),
                                                                              className: "font-mono"
                                                                            }),
                                                                        JsxRuntime.jsx("span", {
                                                                              children: "•"
                                                                            }),
                                                                        JsxRuntime.jsx("span", {
                                                                              children: t`Skill: ${skillLevel.toFixed(0)}`
                                                                            }),
                                                                        JsxRuntime.jsx("span", {
                                                                              children: "•"
                                                                            }),
                                                                        JsxRuntime.jsxs("div", {
                                                                              children: [
                                                                                JsxRuntime.jsx(LucideReact.Play, {
                                                                                      className: "w-3 h-3"
                                                                                    }),
                                                                                JsxRuntime.jsx("span", {
                                                                                      children: player.count.toString(),
                                                                                      className: "font-medium"
                                                                                    })
                                                                              ],
                                                                              className: "flex items-center gap-1"
                                                                            })
                                                                      ],
                                                                      className: "flex items-center gap-2 text-xs text-slate-500"
                                                                    })
                                                              ],
                                                              className: "flex flex-col min-w-0 flex-1"
                                                            })
                                                      ],
                                                      className: "flex items-center gap-3 p-3 rounded-lg border-2 border-slate-200 hover:border-blue-500 hover:bg-blue-50 transition-all text-left",
                                                      onClick: (function (param) {
                                                          onSelect(player);
                                                        })
                                                    }, player.id);
                                        }),
                                    className: "grid grid-cols-1 sm:grid-cols-2 gap-3"
                                  }),
                            className: "p-6"
                          })
                    ],
                    className: "bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"
                  }),
              className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
            });
}

var make = PlayerReplaceModal;

export {
  Fragment ,
  getSkillColor ,
  make ,
}
/*  Not a pure module */
